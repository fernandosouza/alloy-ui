<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link rel="stylesheet" href="../../build/aui-css/css/bootstrap.css">
    <script src="../../build/aui/aui.js"></script>
</head>
<body>

<!-- START TEMPLATE -->
    <script id="js-template" type="text/x-handlebars-template">
        <fieldset class="well">
            <p class="label label-primary pull-right">{{ x }} row</p>
            <div class="form-group">
                <label for="name{{ x }}">Name</label>
                <input type="text" name="name" class="form-control" id="name{{ x }}" />
            </div>

            <div class="form-group">
                <label for="email{{ x }}">Email</label>
                <input type="text" name="email" class="form-control" id="email{{ x }}" />
            </div>
        </fieldset>
    </script>
<!-- END TEMPLATE -->


<div class="container">
    <div class="col-lg-8 col-lg-offset-2">
        <h1>Form Validation Bug Report</h1>

        <ol>
            <li>New Items are Added Automatically</li>
            <li>Press Submit Button</li>
            <li>Notice that only the first items are displaying errors</li>
            <li>Because of the error above, if you fill the first Name and Email, the validation will submit the form</li>
            <li>BUT, if you go on each field, the validation works.</li>
        </ol>

        <hr />
        <form action="" class="form-vertical" id="myForm">
            <div id="drop-zone"></div>

            <input type="submit" class="btn btn-primary btn-block" value="Submit me!">
            <hr />
        </form>
    </div>
</div>

<script type="text/javascript">
YUI({ filter:'raw' }).use('node', 'event', 'handlebars', 'aui-form-validator', function (Y) {
    function validator() {
        new Y.FormValidator({
            boundingBox: Y.one('#myForm'),
            showAllMessages: true,
            rules: {
                name: {
                    required: true
                },
                email: {
                    required: true,
                }
            }
        });
    }
    function add(x) {
        var templateHTML = Y.Handlebars.compile(Y.one("#js-template").getHTML());
        var output = templateHTML({
            x: x
        });
        Y.one("#drop-zone").append(output);
    }
    validator();
    add(1);
    add(2);
    add(3);
});
</script>
</body>
</html>